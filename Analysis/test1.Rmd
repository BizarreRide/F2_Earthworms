---
title: "Untitled"
author: "Quentin Schorpp"
date: "11. Januar 2016"
output: html_document
---

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
summary(cars)
```

You can also embed plots, for example:

```{r, echo=FALSE}
plot(cars)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
```{r LoadData, results = "hide", echo=TRUE}
# Load Data ####
#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
source("Data/GatherSource/F2_EW_MakeLikeFile.R")
source("Data/GatherSource/Functions/evplot.R")
source("Data/GatherSource/Functions/cleanplot.pca.R")

# Data processing ####
#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

# Subsetting 
## Response variables are the soil properties of the plots
df.rsp1 <- data[,c("clay","sand","pH","mc","cn")]
df.rsp2 <- data2[,c("clay","sand","pH","mc","cn")]
df.rsp3 <- data3[,c("clay","sand","pH","mc","cn")]

## Explanatory variable are abundances of the functional groups
df.exp1 <- data[,c("ancad", "endad", "epi")]
df.exp2 <- data2[,c("ancad", "endad", "epi")]
df.exp3 <- data3[,c("ancad", "endad", "epi")]

df.groups1 <- data[,c("age_class","samcam","field.ID", "hole")]
df.groups2 <- data2[,c("age_class","samcam","field.ID")]
df.groups3 <- data3[,c("age_class","field.ID")]

# Transformations
df.rsp1.log <- log(df.rsp1)                   # log transformation
df.rsp1.z <- scale(df.rsp1.log)               # z transformation
minShift <- function(x) {x + abs(min(x))}
df.rsp1.z <- apply(df.rsp1.z, 2, minShift) # eliminate negative values

# Plot Aid
## Background color of symbols
p_bg <- grey.colors(5, start = 0.8, end = 0, gamma = 2.2, alpha = NULL)
p_bg <- rep(rep(p_bg, each=12),3)
## shape of symbols
p_shp <- c(rep(rep(c(24,25,23,22,21), each=12),3))
p_shp.legend <- c(2,6,5,0,1)
#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

```




